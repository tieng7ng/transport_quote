# Proposition : Workflow Devis en mode "Panier"

## Contexte

AmÃ©liorer l'ergonomie de la crÃ©ation de devis en permettant Ã  l'utilisateur de construire un devis progressivement, en ajoutant plusieurs trajets issus de diffÃ©rentes recherches.

---

## 1. Comparaison des approches

### Approche actuelle : Recherche â†’ SÃ©lection â†’ Devis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recherche  â”‚â”€â”€â”€â”€>â”‚  RÃ©sultats  â”‚â”€â”€â”€â”€>â”‚ GÃ©nÃ©rer     â”‚
â”‚  (critÃ¨res) â”‚     â”‚  (sÃ©lection)â”‚     â”‚ Devis       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Limites :**
- Une seule recherche par devis
- Difficile d'ajouter plusieurs trajets
- Doit refaire tout le processus pour modifier
- Pas de vision globale pendant la construction

---

### Approche proposÃ©e : Panier / Devis en cours

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrÃ©er      â”‚â”€â”€â”€â”€>â”‚  Rechercher â”‚â”€â”€â”€â”€>â”‚  Ajouter    â”‚â”€â”€â”
â”‚  Devis      â”‚     â”‚  Trajet     â”‚     â”‚  au Devis   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                           â–²                             â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   (rÃ©pÃ©ter)
                                        â”‚
                                        v
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚  Finaliser  â”‚
                               â”‚  & Envoyer  â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Avantages :**

| Aspect | BÃ©nÃ©fice |
|--------|----------|
| Multi-trajets | Ajouter plusieurs routes au mÃªme devis |
| FlexibilitÃ© | Supprimer/modifier des lignes individuellement |
| Comparaison | Faire plusieurs recherches, garder les meilleurs |
| Total en temps rÃ©el | Voir le montant Ã©voluer |
| Sauvegarde | Reprendre un devis plus tard (brouillon) |
| UX familiÃ¨re | Similaire au e-commerce (panier) |

---

## 2. Interfaces Actuelles de l'Application

Cette section documente les interfaces existantes de l'application pour identifier les amÃ©liorations possibles.

### 2.1 Liste des Devis Actuelle (`CustomerQuotes.tsx`)

**Structure actuelle :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Devis Clients                                         [+ Nouveau Devis]    â”‚
â”‚  GÃ©rez vos propositions commerciales                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ” Rechercher par rÃ©fÃ©rence, client...                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ RÃ©fÃ©rence    â”‚ Client           â”‚ Date     â”‚ Montant HT â”‚ Statut â”‚    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ DEV-2026-001 â”‚ SociÃ©tÃ© ABC      â”‚ ğŸ“… 27/01 â”‚  450.00 â‚¬  â”‚ DRAFT  â”‚ğŸ‘ğŸ—‘â”‚ â”‚
â”‚  â”‚              â”‚ SARL ABC         â”‚          â”‚            â”‚ (gris) â”‚    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ DEV-2026-002 â”‚ Transport Martin â”‚ ğŸ“… 25/01 â”‚  820.00 â‚¬  â”‚ SENT   â”‚ ğŸ‘ â”‚ â”‚
â”‚  â”‚              â”‚ SAS Martin       â”‚          â”‚            â”‚ (jaune)â”‚    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ DEV-2026-003 â”‚ Logistique Plus  â”‚ ğŸ“… 20/01 â”‚ 1250.00 â‚¬  â”‚ACCEPTEDâ”‚ ğŸ‘ â”‚ â”‚
â”‚  â”‚              â”‚                  â”‚          â”‚            â”‚ (vert) â”‚    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Ã‰tat vide :                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          ğŸ“„                                         â”‚   â”‚
â”‚  â”‚                     Aucun devis                                     â”‚   â”‚
â”‚  â”‚    Commencez par crÃ©er une nouvelle recherche pour gÃ©nÃ©rer un devis â”‚   â”‚
â”‚  â”‚                  Aller Ã  la recherche â†’                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Colonnes du tableau :**
| Colonne | Source | Description |
|---------|--------|-------------|
| RÃ©fÃ©rence | `quote.reference` | DEV-YYYY-XXXX ou "Brouillon" |
| Client | `quote.customer_name` + `quote.customer_company` | Nom et sociÃ©tÃ© |
| Date | `quote.created_at` | Date de crÃ©ation |
| Montant HT | `quote.total` | Total en euros |
| Statut | `quote.status` | Badge colorÃ© |
| Actions | - | IcÃ´nes d'action |

**Statuts et couleurs :**
| Statut | Couleur | Description |
|--------|---------|-------------|
| `DRAFT` | Gris | Brouillon en cours |
| `READY` | Bleu | PrÃªt Ã  envoyer |
| `SENT` | Jaune | EnvoyÃ© au client |
| `ACCEPTED` | Vert | AcceptÃ© |
| `REJECTED` | Rouge | RefusÃ© |

**Actions disponibles :**
| Action | IcÃ´ne | Condition | Description |
|--------|-------|-----------|-------------|
| `+ Nouveau Devis` | - | Toujours | CrÃ©e un devis et redirige vers l'Ã©diteur |
| Voir le devis | ğŸ‘ | Toujours | Navigue vers `/customer-quotes/{id}` |
| Supprimer | ğŸ—‘ | Statut = `DRAFT` | Supprime le devis brouillon |
| Recherche | ğŸ” | Toujours | Filtre par rÃ©fÃ©rence ou client (placeholder) |

---

### 2.2 Affichage d'un Devis (`CustomerQuoteDetail.tsx`)

**Structure actuelle :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Retour Ã  la liste                                                        â”‚
â”‚                                                                             â”‚
â”‚  DEV-2026-0042                                    â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                                   â”‚ DRAFTâ”‚                  â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                    [ğŸ–¨ Imprimer] [ğŸ“¤ Envoyer] [âœï¸ Ã‰diter]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“„ DÃ©tail des prestations      3 lignes    â”‚  â”‚  CLIENT               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”Œâ”€â”€â”€â”                â”‚ â”‚
â”‚  â”‚                                             â”‚  â”‚  â”‚ S â”‚ SociÃ©tÃ© ABC    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚  â”‚  â””â”€â”€â”€â”˜ SARL           â”‚ â”‚
â”‚  â”‚  â”‚TRANSPORTâ”‚ Paris â†’ Lyon                   â”‚  â”‚                       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚  Email: contact@abc.frâ”‚ â”‚
â”‚  â”‚  ğŸšš ROAD - DHL Express                      â”‚  â”‚  ValiditÃ©: 28/02/2026 â”‚ â”‚
â”‚  â”‚  Paris, FR â†’ Lyon, FR                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  Poids: 500 kg | DÃ©lai: 24h                 â”‚                            â”‚
â”‚  â”‚                              172.50 â‚¬       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Marge: 15% (22.50 â‚¬)     â”‚  â”‚  RÃ‰CAPITULATIF        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                       â”‚ â”‚
â”‚  â”‚                                             â”‚  â”‚  Total Transport      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚  â”‚            304.50 â‚¬   â”‚ â”‚
â”‚  â”‚  â”‚TRANSPORTâ”‚ Lyon â†’ Marseille               â”‚  â”‚  Total Frais          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚             25.00 â‚¬   â”‚ â”‚
â”‚  â”‚  ğŸšš ROAD - Transport Besson                 â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚
â”‚  â”‚  Lyon, FR â†’ Marseille, FR                   â”‚  â”‚  Total HT             â”‚ â”‚
â”‚  â”‚  Poids: 500 kg | DÃ©lai: 48h                 â”‚  â”‚            329.50 â‚¬   â”‚ â”‚
â”‚  â”‚                              132.00 â‚¬       â”‚  â”‚                       â”‚ â”‚
â”‚  â”‚                    Marge: 10% (12.00 â‚¬)     â”‚  â”‚  Marge Totale         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚             34.50 â‚¬   â”‚ â”‚
â”‚  â”‚                                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”                                    â”‚                            â”‚
â”‚  â”‚  â”‚FRAISâ”‚ Frais de dossier                   â”‚                            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜                                    â”‚                            â”‚
â”‚  â”‚                               25.00 â‚¬       â”‚                            â”‚
â”‚  â”‚                    Marge: 100% (25.00 â‚¬)    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Layout :** Grille 3 colonnes (2/3 contenu principal + 1/3 sidebar)

**Zone principale - DÃ©tail des prestations :**
| Ã‰lÃ©ment | Description |
|---------|-------------|
| Badge type | `TRANSPORT` (bleu) ou `FRAIS` (orange) |
| Description | `item.description` |
| DÃ©tails transport | Mode, partenaire, origine â†’ destination, poids, dÃ©lai |
| Prix vente | `item.sell_price` |
| Marge | Pourcentage et montant |

**Sidebar - Informations :**
| Section | Contenu |
|---------|---------|
| Client | Avatar, nom, sociÃ©tÃ©, email, validitÃ© |
| RÃ©capitulatif | Total transport, total frais, total HT, marge totale |

**Actions disponibles :**
| Bouton | Action |
|--------|--------|
| Imprimer | Placeholder (non implÃ©mentÃ©) |
| Envoyer | Placeholder (non implÃ©mentÃ©) |
| Ã‰diter | Navigation vers `/customer-quotes/{id}/edit` |

---

### 2.3 Ã‰dition d'un Devis (`CustomerQuoteEditor.tsx`)

**Structure actuelle :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â”‚ Ã‰diteur de Devis | DEV-2026-0042                                       â”‚
â”‚      Sans client - DRAFT                                                    â”‚
â”‚                                          Marge Totale â”‚ Total HT            â”‚
â”‚                                             34.50 â‚¬   â”‚ 329.50 â‚¬            â”‚
â”‚                                                       â”‚        [Enregistrer]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ‘¤ Informations Client                                        [âœï¸ Modifier]â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Nom : SociÃ©tÃ© ABC                                                  â”‚   â”‚
â”‚  â”‚  SociÃ©tÃ© : SARL ABC                                                 â”‚   â”‚
â”‚  â”‚  Email : contact@abc.fr                                             â”‚   â”‚
â”‚  â”‚  ValiditÃ© : 28/02/2026                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š Prestations Transport                          Sous-total: 304.50 â‚¬     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Paris â†’ Lyon                                                       â”‚   â”‚
â”‚  â”‚  DHL Express | ROAD | 24h | 500 kg                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix Achat    Marge %      Marge â‚¬      Prix Vente                 â”‚   â”‚
â”‚  â”‚  150.00 â‚¬      [15   ]%     22.50 â‚¬      172.50 â‚¬              [ğŸ—‘] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Lyon â†’ Marseille                                                   â”‚   â”‚
â”‚  â”‚  Transport Besson | ROAD | 48h | 500 kg                             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix Achat    Marge %      Marge â‚¬      Prix Vente                 â”‚   â”‚
â”‚  â”‚  120.00 â‚¬      [10   ]%     12.00 â‚¬      132.00 â‚¬              [ğŸ—‘] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Mode de transport : [ğŸšš Route â–¼] [ğŸš‚ Rail] [âœˆï¸ AÃ©rien] [ğŸš¢ Maritime] â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                    [+ Ajouter un transport]                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  (Visible uniquement si statut = DRAFT)                                    â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                             â”‚
â”‚  â• Frais Annexes                                   [+ Ajouter un coÃ»t]     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Frais de dossier                                                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix Vente                                                         â”‚   â”‚
â”‚  â”‚  [25.00  ] â‚¬                                                   [ğŸ—‘] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  (Si aucun transport: "Aucune ligne de transport. Ajoutez des tarifs        â”‚
â”‚   depuis la recherche." + lien vers /search)                                â”‚
â”‚  (Si aucun frais: "Aucun frais additionnel.")                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modal Ã‰dition Client :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modifier les informations client                [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Nom *                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SociÃ©tÃ© ABC                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  SociÃ©tÃ©                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SARL ABC                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Email                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ contact@abc.fr                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Date de validitÃ©                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 28/02/2026                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Annuler     â”‚  â”‚  Enregistrer  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Barre supÃ©rieure :**
| Ã‰lÃ©ment | Description |
|---------|-------------|
| Retour | Lien vers `/customer-quotes/{id}` |
| Titre | "Ã‰diteur de Devis \| {reference}" |
| Sous-titre | Client et statut |
| Marge Totale | Affichage en temps rÃ©el |
| Total HT | Affichage en temps rÃ©el |
| Enregistrer | Bouton de sauvegarde |

**Section Client :**
| Champ | Ã‰ditable | Description |
|-------|----------|-------------|
| Nom | **Oui** | `customer_name` - Nom du contact |
| SociÃ©tÃ© | **Oui** | `customer_company` - Raison sociale |
| Email | **Oui** | `customer_email` - Email de contact |
| ValiditÃ© | **Oui** | `valid_until` - Date de validitÃ© du devis |

**SÃ©lecteur Mode de Transport :**
| Mode | IcÃ´ne | Valeur |
|------|-------|--------|
| Route | ğŸšš | `ROAD` |
| Rail | ğŸš‚ | `RAIL` |
| AÃ©rien | âœˆï¸ | `AIR` |
| Maritime | ğŸš¢ | `SEA` |

Le mode sÃ©lectionnÃ© est passÃ© Ã  la modal de recherche lors de l'ajout d'un transport.

**Bouton "+ Ajouter un transport" :**
- Visible uniquement si `status === 'DRAFT'`
- Ouvre la modal de recherche avec le mode de transport prÃ©-sÃ©lectionnÃ©
- Le mode n'est plus modifiable dans la modal

**Section Transport (`QuoteItemEditor`) :**
| Champ | Ã‰ditable | Description |
|-------|----------|-------------|
| Description | Non | Trajet (origine â†’ destination) |
| DÃ©tails | Non | Partenaire, mode, dÃ©lai, poids |
| Prix Achat | Non | `cost_price` (prix partenaire) |
| Marge % | **Oui** | Pourcentage de marge modifiable |
| Marge â‚¬ | CalculÃ© | `cost_price Ã— margin_percent / 100` |
| Prix Vente | CalculÃ© | `cost_price + margin_amount` |
| Supprimer | Oui | Bouton corbeille |

**Section Frais (`QuoteItemEditor`) :**
| Champ | Ã‰ditable | Description |
|-------|----------|-------------|
| Description | Non | LibellÃ© du frais |
| Prix Vente | **Oui** | Montant modifiable directement |
| Supprimer | Oui | Bouton corbeille |

**Modal Ajout de Frais (`AddFeeModal`) :**
- Permet d'ajouter des frais prÃ©dÃ©finis ou personnalisÃ©s
- Champs : description, montant

**Modal Ã‰dition Client (`EditCustomerModal`) :**
- Permet de modifier les informations du client
- Champs : nom, sociÃ©tÃ©, email, date de validitÃ©

---

### 2.4 Modal Recherche (`SearchModal.tsx`)

**Ã‰volution proposÃ©e :** Transformer la page de recherche en modal pour amÃ©liorer l'ergonomie et permettre de lancer une recherche sans quitter le contexte actuel.

**Note importante :** Le mode de transport est sÃ©lectionnÃ© dans l'Ã©diteur de devis (section 2.3) et passÃ© Ã  la modal. Il n'est plus modifiable dans la modal.

**Structure cible :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  Rechercher un transport                                     [X]  â”‚     â”‚
â”‚   â”‚  Mode : ğŸšš Route                                                  â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚     â”‚
â”‚   â”‚  â”‚  ğŸ“ Origine             â”‚  â”‚  ğŸ“ Destination         â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â”‚Franceâ–¼â”‚ â”‚ 75001    â”‚ â”‚  â”‚  â”‚Franceâ–¼â”‚ â”‚ 69002    â”‚ â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â”‚ Paris              â”‚ â”‚  â”‚  â”‚ Lyon               â”‚ â”‚        â”‚     â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚
â”‚   â”‚  â”‚ğŸ“¦ Marchandise            â”‚  â”‚ğŸ“… Date                   â”‚      â”‚     â”‚
â”‚   â”‚  â”‚                          â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ Poids (kg) *             â”‚  â”‚ Date d'expÃ©dition *      â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â”‚ 500                  â”‚ â”‚  â”‚ â”‚ 27/01/2026           â”‚ â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚     â”‚
â”‚   â”‚  â”‚                          â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ Volume (m3)              â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â”‚ 2.5                  â”‚ â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                          â”‚      â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚   â”‚  â”‚   Annuler     â”‚  â”‚         ğŸ” Rechercher les offres        â”‚  â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  (ArriÃ¨re-plan : page des rÃ©sultats ou devis en cours visible)              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Points d'accÃ¨s Ã  la modal :**
| Emplacement | Action | Mode transport |
|-------------|--------|----------------|
| Header/Navbar | Bouton "ğŸ” Rechercher" | Aucun (tous modes) |
| Ã‰diteur Devis | Bouton "+ Ajouter un transport" | Mode sÃ©lectionnÃ© dans l'Ã©diteur |
| Page RÃ©sultats | Bouton "Nouvelle recherche" | Mode prÃ©cÃ©dent conservÃ© |

**Champs disponibles :**
| Champ | Type | Obligatoire | Description |
|-------|------|-------------|-------------|
| `origin_country` | Select | Oui | FR, DE, IT, ES, BE |
| `origin_postal_code` | Text | Non* | Code postal origine |
| `origin_city` | Autocomplete | Non* | Ville origine |
| `dest_country` | Select | Oui | FR, DE, IT, ES, BE |
| `dest_postal_code` | Text | Non* | Code postal destination |
| `dest_city` | Autocomplete | Non* | Ville destination |
| `weight` | Number | Oui | Poids en kg |
| `volume` | Number | Non | Volume en mÂ³ |
| `shipping_date` | Date | Oui | Date d'expÃ©dition |

*Au moins ville OU code postal requis pour origine et destination.

**ParamÃ¨tre passÃ© (non modifiable) :**
| ParamÃ¨tre | Source | Description |
|-----------|--------|-------------|
| `transport_mode` | Ã‰diteur de devis | ROAD, RAIL, AIR, SEA ou undefined (tous) |

**Comportement :**
| Action | RÃ©sultat |
|--------|----------|
| Clic "Rechercher" | Ferme la modal, navigue vers `/results` avec les rÃ©sultats |
| Clic "Annuler" ou "X" | Ferme la modal, reste sur la page actuelle |
| Clic hors modal | Ferme la modal |
| Touche Escape | Ferme la modal |

---

### 2.5 Page RÃ©sultats Actuelle (`Results.tsx`)

**Structure actuelle :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Retour Ã  la recherche                                                    â”‚
â”‚                                                                             â”‚
â”‚  3 offre(s) correspondante(s)                                               â”‚
â”‚  ğŸ“ Paris, 75001, France â†’ ğŸ“ Lyon, 69002, France | ğŸ“¦ 500 kg               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”                                                             â”‚   â”‚
â”‚  â”‚  â”‚ ğŸšš â”‚  DHL Express                                                â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚  â”‚          â”‚ ROAD â”‚ â”‚ 100 - 1000 kg  â”‚                                â”‚   â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ• transit: 24h     ğŸ“… validitÃ©: 2026-03-01                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                                    Prix estimÃ©                      â”‚   â”‚
â”‚  â”‚                                    150.00 EUR   [â• Ajouter au devis]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”                                                             â”‚   â”‚
â”‚  â”‚  â”‚ ğŸšš â”‚  Transport Besson                                           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚  â”‚          â”‚ ROAD â”‚ â”‚ 200 - 2000 kg  â”‚                                â”‚   â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ• transit: 48h     ğŸ“… validitÃ©: illimitÃ©e                         â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                                    Prix estimÃ©                      â”‚   â”‚
â”‚  â”‚                                    120.00 EUR   [â• Ajouter au devis]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”                                                             â”‚   â”‚
â”‚  â”‚  â”‚ ğŸšš â”‚  XPO Logistics                                              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚  â”‚          â”‚ ROAD â”‚ â”‚ 50 - 800 kg    â”‚                                â”‚   â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ• transit: 36h     ğŸ“… validitÃ©: 2026-02-15                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                                    Prix estimÃ©                      â”‚   â”‚
â”‚  â”‚                                    135.00 EUR   [â• Ajouter au devis]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Informations affichÃ©es par rÃ©sultat :**
| Ã‰lÃ©ment | Source | Description |
|---------|--------|-------------|
| Nom partenaire | `quote.partner.name` | Nom du transporteur |
| Mode transport | `quote.transport_mode` | ROAD, RAIL, AIR, SEA |
| Plage poids | `quote.weight_min` - `quote.weight_max` | CapacitÃ© en kg |
| DÃ©lai transit | `quote.delivery_time` | DurÃ©e de livraison |
| ValiditÃ© | `quote.valid_until` | Date limite de validitÃ© |
| Prix | `quote.cost` + `quote.currency` | Prix estimÃ© |

**Action disponible :** Bouton "Ajouter au devis" â†’ appelle `addItem(quote.id, criteria.weight)`

---

### 2.6 Sidebar Devis en Cours Actuelle (`QuoteSidebar.tsx`)

**Structure actuelle :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ Mon Devis en cours              [X]â”‚  â† Header bleu foncÃ©
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚  â”‚
â”‚  â”‚ â”‚TRANSPORT â”‚  500 kg         [ğŸ—‘]â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â”‚
â”‚  â”‚ Paris â†’ Lyon                     â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ DHL Express                      â”‚  â”‚
â”‚  â”‚              172.50 â‚¬            â”‚  â”‚
â”‚  â”‚              Marge: 15% (22.50 â‚¬)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚  â”‚
â”‚  â”‚ â”‚TRANSPORT â”‚  500 kg         [ğŸ—‘]â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â”‚
â”‚  â”‚ Lyon â†’ Marseille                 â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ Transport Besson                 â”‚  â”‚
â”‚  â”‚              132.00 â‚¬            â”‚  â”‚
â”‚  â”‚              Marge: 10% (12.00 â‚¬)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚ â”‚FRAIS â”‚                     [ğŸ—‘]â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â”‚ Frais de dossier                 â”‚  â”‚
â”‚  â”‚                       25.00 â‚¬    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Sous-total Transport      304.50 â‚¬    â”‚
â”‚  Frais annexes              25.00 â‚¬    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  Total HT                  329.50 â‚¬    â”‚
â”‚  Marge Totale               34.50 â‚¬    â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Vider    â”‚  â”‚ ğŸ“„ Finaliser   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**FonctionnalitÃ©s actuelles :**
| Action | Fonction | Description |
|--------|----------|-------------|
| Fermer | `closeSidebar()` | Ferme le panel latÃ©ral |
| Supprimer item | `removeItem(item.id)` | Retire une ligne du devis |
| Vider | `clearQuote()` | Supprime tout le devis |
| Finaliser | Navigation vers `/customer-quotes/{id}/edit` | Ouvre l'Ã©diteur de prix |

---

## 3. Maquettes Interface (Cibles)

### 3.1 Vue "Devis en cours" (Sidebar ou Panel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ Devis en cours                              Total: 450.00 EUR   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. Paris â†’ Lyon                                              â”‚  â”‚
â”‚  â”‚     DHL Express | Route | 24h                                 â”‚  â”‚
â”‚  â”‚     Poids: 500 kg                                             â”‚  â”‚
â”‚  â”‚                                        150.00 EUR    [ğŸ—‘ï¸]     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  2. Lyon â†’ Marseille                                          â”‚  â”‚
â”‚  â”‚     Transport Besson | Route | 12h                            â”‚  â”‚
â”‚  â”‚     Poids: 500 kg                                             â”‚  â”‚
â”‚  â”‚                                        120.00 EUR    [ğŸ—‘ï¸]     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  3. Marseille â†’ Nice                                          â”‚  â”‚
â”‚  â”‚     XPO Logistics | Route | 6h                                â”‚  â”‚
â”‚  â”‚     Poids: 500 kg                                             â”‚  â”‚
â”‚  â”‚                                        180.00 EUR    [ğŸ—‘ï¸]     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Sous-total                                          450.00 EUR     â”‚
â”‚  Frais de dossier                                     15.00 EUR     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  TOTAL                                               465.00 EUR     â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              + Ajouter un trajet                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              GÃ©nÃ©rer le devis PDF                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Ajouter un trajet via l'interface recherche d'un transport

L'utilisateur peut ajouter un trajet au devis directement depuis l'interface de recherche de transport.

**Flux utilisateur :**

1. L'utilisateur accÃ¨de Ã  la page "Rechercher un transport"
2. Il saisit les critÃ¨res de recherche (origine, destination, poids, etc.)
3. Les rÃ©sultats s'affichent avec les tarifs des diffÃ©rents partenaires
4. Pour chaque rÃ©sultat, un bouton "Ajouter au devis" est disponible
5. Au clic, le trajet est ajoutÃ© au devis en cours (ou un nouveau devis est crÃ©Ã©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rechercher un transport                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Origine          Destination        Poids           Date                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Paris     â”‚    â”‚ Lyon      â”‚     â”‚ 500 kg  â”‚     â”‚ 15/02/2026â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚                              [ğŸ” Rechercher]                                â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RÃ©sultats (3 tarifs trouvÃ©s)                                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸšš DHL Express                                                     â”‚   â”‚
â”‚  â”‚  Mode: Route | DÃ©lai: 24h | Poids max: 1000 kg                      â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix: 150.00 EUR                    [+ Ajouter au devis]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸšš Transport Besson                                                â”‚   â”‚
â”‚  â”‚  Mode: Route | DÃ©lai: 48h | Poids max: 2000 kg                      â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix: 120.00 EUR                    [+ Ajouter au devis]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸšš XPO Logistics                                        âœ“ AjoutÃ©   â”‚   â”‚
â”‚  â”‚  Mode: Route | DÃ©lai: 36h | Poids max: 800 kg                       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Prix: 135.00 EUR                    [Retirer du devis]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Comportement du bouton "Ajouter au devis" :**

| Situation | Action |
|-----------|--------|
| Aucun devis en cours | CrÃ©e automatiquement un nouveau devis brouillon |
| Devis en cours existe | Ajoute le trajet au devis existant |
| Trajet dÃ©jÃ  dans le devis | Affiche "Retirer du devis" Ã  la place |

**Indicateur visuel :**
- Badge "âœ“ AjoutÃ©" sur les tarifs dÃ©jÃ  prÃ©sents dans le devis
- Le panel latÃ©ral "Devis en cours" s'actualise en temps rÃ©el
- Notification toast confirmant l'ajout

### 3.3 Bouton "Ajouter au devis" dans les rÃ©sultats de recherche

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RÃ©sultats de recherche : Paris â†’ Lyon                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸšš DHL Express                                               â”‚  â”‚
â”‚  â”‚  Route | 24h | 500 kg max                                     â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  150.00 EUR                        [+ Ajouter au devis]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸšš Transport Besson                                          â”‚  â”‚
â”‚  â”‚  Route | 48h | 1000 kg max                                    â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  120.00 EUR                        [+ Ajouter au devis]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸšš XPO Logistics                                    âœ“ AjoutÃ© â”‚  â”‚
â”‚  â”‚  Route | 36h | 800 kg max                                     â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  135.00 EUR                        [Retirer du devis]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Ã‰diteur de prix (avant gÃ©nÃ©ration PDF)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Finaliser le devis DEV-2026-0042                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  LIGNES TRANSPORT                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Description          â”‚ Prix Achat â”‚ Marge %  â”‚ Marge EUR â”‚ Prix Vente  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Paris â†’ Lyon (DHL)   â”‚  150.00 â‚¬  â”‚ [15 %]   â”‚   22.50 â‚¬ â”‚  172.50 â‚¬   â”‚â”‚
â”‚  â”‚ Lyon â†’ Marseille     â”‚  120.00 â‚¬  â”‚ [10 %]   â”‚   12.00 â‚¬ â”‚  132.00 â‚¬   â”‚â”‚
â”‚  â”‚ Marseille â†’ Nice     â”‚  180.00 â‚¬  â”‚ [12 %]   â”‚   21.60 â‚¬ â”‚  201.60 â‚¬   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          Sous-total transports:  506.10 â‚¬   â”‚
â”‚                                                                             â”‚
â”‚  FRAIS                                                   [+ Ajouter frais]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Description                                              â”‚ Montant     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Frais de dossier                                         â”‚   25.00 â‚¬   â”‚â”‚
â”‚  â”‚ Assurance transport                                      â”‚   50.00 â‚¬   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                 Sous-total frais:  75.00 â‚¬  â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                             â”‚
â”‚  Marge totale                                                    56.10 â‚¬    â”‚
â”‚  TOTAL CLIENT                                                   581.10 â‚¬    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        GÃ©nÃ©rer le PDF                                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Note** : Le PDF final n'affiche que les prix de vente. Les prix d'achat et marges restent confidentiels.

### 3.5 Modal "Ajouter des frais"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ajouter des frais                              [X]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Type de frais :                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â—‹ Frais de dossier              25.00 â‚¬            â”‚â”‚
â”‚  â”‚ â—‹ Assurance transport           [____] â‚¬           â”‚â”‚
â”‚  â”‚ â—‹ SupplÃ©ment urgence            50.00 â‚¬            â”‚â”‚
â”‚  â”‚ â—‹ Manutention spÃ©ciale          35.00 â‚¬            â”‚â”‚
â”‚  â”‚ â— Autre : [Description_______]  [____] â‚¬           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Annuler     â”‚  â”‚   Ajouter     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 Page "Mes Devis" (Liste des brouillons)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mes Devis                                      [+ Nouveau Devis]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Statut     â”‚ RÃ©fÃ©rence      â”‚ Client        â”‚ Total   â”‚ Actions â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ ğŸ“ Brouillon â”‚ DEV-2026-001  â”‚ -             â”‚ 450 EUR â”‚ âœï¸ ğŸ—‘ï¸  â”‚â”‚
â”‚  â”‚ ğŸ“¤ EnvoyÃ©    â”‚ DEV-2026-002  â”‚ client@ex.com â”‚ 820 EUR â”‚ ğŸ‘ï¸ ğŸ“§  â”‚â”‚
â”‚  â”‚ âœ… AcceptÃ©   â”‚ DEV-2026-003  â”‚ autre@ex.com  â”‚ 1250 EURâ”‚ ğŸ‘ï¸     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Moteur de Prix (Marges & Frais)

### 4.1 Principe

Le systÃ¨me propose un prix de vente basÃ© sur une marge par dÃ©faut, mais l'opÃ©rateur peut l'ajuster avant l'envoi du devis.

**FonctionnalitÃ©s :**

| FonctionnalitÃ© | Description |
|----------------|-------------|
| Marge par dÃ©faut | DÃ©finie par partenaire (ex: DHL +15%, Besson +10%) |
| Lignes de frais | Ajout manuel de frais (Dossier, Urgence, Assurance...) |
| Prix Ã©ditable | L'opÃ©rateur voit le prix d'achat et peut ajuster la marge |
| Calcul automatique | `Prix Vente = Prix Achat + Marge` |

### 4.2 Types de lignes

| Type | Description | Exemple |
|------|-------------|---------|
| `TRANSPORT` | Trajet issu d'un tarif partenaire | Paris â†’ Lyon (DHL) |
| `FEE` | Frais ajoutÃ© manuellement | Frais de dossier, Assurance |

### 4.3 Calcul des prix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ligne Transport : Paris â†’ Lyon (DHL)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Prix Achat (Partenaire)    150.00 EUR                          â”‚
â”‚  Marge par dÃ©faut (DHL)     +15%                                â”‚
â”‚  Marge calculÃ©e              22.50 EUR                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  Prix Vente (Client)        172.50 EUR   [Ã‰ditable]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ligne Frais : Assurance                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Prix                        50.00 EUR   [Ã‰ditable]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 Marge par dÃ©faut (Partenaire)

Chaque partenaire peut avoir une marge par dÃ©faut diffÃ©rente :

| Partenaire | Marge par dÃ©faut |
|------------|------------------|
| DHL Express | 15% |
| Transport Besson | 10% |
| XPO Logistics | 12% |
| *(DÃ©faut global)* | 20% |

Cette marge est appliquÃ©e automatiquement lors de l'ajout d'un tarif au devis, mais reste modifiable par l'opÃ©rateur.

---

## 5. ModÃ¨le de donnÃ©es

### 5.1 Modification du modÃ¨le Partner (existant)

```python
class Partner(Base):
    # ... champs existants ...

    # Nouveau champ pour la marge
    default_margin = Column(Numeric(5, 2), default=20.00)  # Marge par dÃ©faut en %
```

### 5.2 Nouveau modÃ¨le : Devis Client (CustomerQuote)

```python
class CustomerQuote(Base):
    """Devis client (cycle complet : brouillon â†’ envoyÃ© â†’ acceptÃ©)"""
    __tablename__ = "customer_quotes"

    id = Column(String, primary_key=True, default=lambda: str(uuid4()))
    reference = Column(String, unique=True)  # DEV-2026-XXXX
    status = Column(Enum(CustomerQuoteStatus), default=CustomerQuoteStatus.DRAFT)

    # Client (optionnel en brouillon)
    customer_name = Column(String, nullable=True)
    customer_email = Column(String, nullable=True)
    customer_company = Column(String, nullable=True)

    # Totaux
    subtotal = Column(Numeric(10, 2), default=0)
    fees = Column(Numeric(10, 2), default=0)  # Frais annexes
    total = Column(Numeric(10, 2), default=0)
    currency = Column(String, default="EUR")

    # ValiditÃ©
    valid_until = Column(DateTime, nullable=True)

    # MÃ©tadonnÃ©es
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, onupdate=datetime.utcnow)
    sent_at = Column(DateTime, nullable=True)

    # Relations
    items = relationship("CustomerQuoteItem", back_populates="quote", cascade="all, delete-orphan")


class CustomerQuoteStatus(str, Enum):
    DRAFT = "DRAFT"         # En cours de construction
    READY = "READY"         # PrÃªt Ã  envoyer
    SENT = "SENT"           # EnvoyÃ© au client
    ACCEPTED = "ACCEPTED"   # AcceptÃ© par le client
    REJECTED = "REJECTED"   # RefusÃ©
    EXPIRED = "EXPIRED"     # ExpirÃ©


class CustomerQuoteItemType(str, Enum):
    TRANSPORT = "TRANSPORT"   # Trajet issu d'un tarif partenaire
    FEE = "FEE"               # Frais ajoutÃ© manuellement


class CustomerQuoteItem(Base):
    """Ligne de devis (trajet ou frais)"""
    __tablename__ = "customer_quote_items"

    id = Column(String, primary_key=True, default=lambda: str(uuid4()))
    quote_id = Column(String, ForeignKey("customer_quotes.id"))

    # Type de ligne
    item_type = Column(Enum(CustomerQuoteItemType), default=CustomerQuoteItemType.TRANSPORT)

    # Description (utilisÃ© pour les frais, ou gÃ©nÃ©rÃ© pour les transports)
    description = Column(String)  # Ex: "Paris â†’ Lyon" ou "Frais de dossier"

    # RÃ©fÃ©rence au tarif source (NULL pour les frais manuels)
    partner_quote_id = Column(String, ForeignKey("partner_quotes.id"), nullable=True)

    # Snapshot des donnÃ©es transport (NULL pour les frais)
    origin_city = Column(String, nullable=True)
    origin_country = Column(String, nullable=True)
    dest_city = Column(String, nullable=True)
    dest_country = Column(String, nullable=True)
    partner_name = Column(String, nullable=True)
    transport_mode = Column(String, nullable=True)
    delivery_time = Column(String, nullable=True)

    # Prix
    cost_price = Column(Numeric(10, 2), default=0)   # Prix d'achat (0 pour les frais)
    sell_price = Column(Numeric(10, 2))              # Prix de vente (client)
    margin_percent = Column(Numeric(5, 2))           # Marge en %
    margin_amount = Column(Numeric(10, 2))           # Marge en EUR (calculÃ©)

    # Ordre d'affichage
    position = Column(Integer, default=0)

    created_at = Column(DateTime, default=datetime.utcnow)

    # Relations
    quote = relationship("CustomerQuote", back_populates="items")
    source_quote = relationship("PartnerQuote")
```

### 5.3 SchÃ©ma de la base

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Partner     â”‚       â”‚   CustomerQuoteItem   â”‚       â”‚  PartnerQuote   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          PK  â”‚       â”‚ id                PK  â”‚   â”Œâ”€â”€>â”‚ id          PK  â”‚
â”‚ name            â”‚       â”‚ quote_id          FK  â”‚â”€â”€â”€â”˜   â”‚ partner_id  FK  â”‚
â”‚ code            â”‚       â”‚ item_type             â”‚       â”‚ origin_city     â”‚
â”‚ default_margin  â”‚<â”€â”€â”   â”‚ description           â”‚       â”‚ dest_city       â”‚
â”‚ ...             â”‚   â”‚   â”‚ partner_quote_id  FK  â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ cost            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ cost_price            â”‚       â”‚ ...             â”‚
                      â”‚   â”‚ sell_price            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚ margin_percent        â”‚
â”‚  CustomerQuote  â”‚   â”‚   â”‚ margin_amount         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚ position              â”‚
â”‚ id          PK  â”‚â”€â”€â”€â”¼â”€â”€>â”‚ origin_city (snap)    â”‚
â”‚ reference       â”‚   â”‚   â”‚ dest_city (snap)      â”‚
â”‚ status          â”‚   â”‚   â”‚ partner_name (snap)   â”‚
â”‚ customer_name   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ customer_email  â”‚   â”‚
â”‚ subtotal        â”‚   â””â”€â”€ Marge par dÃ©faut appliquÃ©e
â”‚ fees_total      â”‚       lors de l'ajout d'un item
â”‚ total           â”‚
â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. API Endpoints

### 6.1 Gestion des devis

| MÃ©thode | Endpoint | Description |
|---------|----------|-------------|
| `POST` | `/api/v1/customer-quotes` | CrÃ©er un nouveau devis (brouillon) |
| `GET` | `/api/v1/customer-quotes` | Lister mes devis |
| `GET` | `/api/v1/customer-quotes/{id}` | DÃ©tail d'un devis |
| `PUT` | `/api/v1/customer-quotes/{id}` | Modifier un devis (client, validitÃ©) |
| `DELETE` | `/api/v1/customer-quotes/{id}` | Supprimer un devis |

### 6.2 Gestion des lignes (Transport)

| MÃ©thode | Endpoint | Description |
|---------|----------|-------------|
| `POST` | `/api/v1/customer-quotes/{id}/items` | Ajouter un tarif au devis |
| `PUT` | `/api/v1/customer-quotes/{id}/items/{item_id}` | Modifier une ligne (prix vente, marge) |
| `DELETE` | `/api/v1/customer-quotes/{id}/items/{item_id}` | Retirer une ligne |
| `PUT` | `/api/v1/customer-quotes/{id}/items/reorder` | RÃ©ordonner les lignes |

### 6.3 Gestion des frais

| MÃ©thode | Endpoint | Description |
|---------|----------|-------------|
| `POST` | `/api/v1/customer-quotes/{id}/fees` | Ajouter une ligne de frais |
| `PUT` | `/api/v1/customer-quotes/{id}/fees/{item_id}` | Modifier un frais |
| `DELETE` | `/api/v1/customer-quotes/{id}/fees/{item_id}` | Supprimer un frais |

### 6.4 Actions

| MÃ©thode | Endpoint | Description |
|---------|----------|-------------|
| `POST` | `/api/v1/customer-quotes/{id}/generate-pdf` | GÃ©nÃ©rer le PDF |
| `POST` | `/api/v1/customer-quotes/{id}/send` | Envoyer par email |

### 6.5 Exemples

#### CrÃ©er un devis

```bash
POST /api/v1/customer-quotes
Content-Type: application/json

{
  "customer_name": "SociÃ©tÃ© ABC",
  "customer_email": "contact@abc.fr",
  "valid_until": "2026-02-28"
}
```

**RÃ©ponse**
```json
{
  "id": "uuid",
  "reference": "DEV-2026-0042",
  "status": "DRAFT",
  "items": [],
  "subtotal": 0,
  "total": 0
}
```

#### Ajouter un tarif au devis

```bash
POST /api/v1/customer-quotes/{quote_id}/items
Content-Type: application/json

{
  "partner_quote_id": "uuid-du-tarif",
  "sell_price": 165.00
}
```

**RÃ©ponse**
```json
{
  "id": "item-uuid",
  "item_type": "TRANSPORT",
  "description": "Paris â†’ Lyon",
  "origin_city": "Paris",
  "dest_city": "Lyon",
  "partner_name": "DHL Express",
  "cost_price": 150.00,
  "margin_percent": 15.00,
  "margin_amount": 22.50,
  "sell_price": 172.50
}
```

#### Modifier la marge d'une ligne

```bash
PUT /api/v1/customer-quotes/{quote_id}/items/{item_id}
Content-Type: application/json

{
  "margin_percent": 20.00
}
```

**RÃ©ponse** (recalcul automatique)
```json
{
  "id": "item-uuid",
  "cost_price": 150.00,
  "margin_percent": 20.00,
  "margin_amount": 30.00,
  "sell_price": 180.00
}
```

#### Ajouter une ligne de frais

```bash
POST /api/v1/customer-quotes/{quote_id}/fees
Content-Type: application/json

{
  "description": "Frais de dossier",
  "sell_price": 25.00
}
```

**RÃ©ponse**
```json
{
  "id": "fee-uuid",
  "item_type": "FEE",
  "description": "Frais de dossier",
  "cost_price": 0,
  "sell_price": 25.00,
  "margin_percent": 100,
  "margin_amount": 25.00
}
```

#### Frais prÃ©dÃ©finis suggÃ©rÃ©s

| Code | Description | Prix suggÃ©rÃ© |
|------|-------------|--------------|
| `DOSSIER` | Frais de dossier | 25.00 EUR |
| `ASSURANCE` | Assurance transport | Variable |
| `URGENCE` | SupplÃ©ment urgence | 50.00 EUR |
| `MANUTENTION` | Manutention spÃ©ciale | 35.00 EUR |
| `CUSTOM` | Autre (libre) | - |

---

## 7. Composants Frontend

### 7.1 Structure des composants

```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ CustomerQuotes.tsx          # Liste des devis
â”‚   â”œâ”€â”€ CustomerQuoteDetail.tsx     # DÃ©tail/Ã©dition d'un devis
â”‚   â”œâ”€â”€ CustomerQuoteEditor.tsx     # Ã‰diteur de prix (nouveau)
â”‚   â””â”€â”€ Search.tsx                  # Recherche (existant, modifiÃ©)
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ customer-quote/
â”‚   â”‚   â”œâ”€â”€ QuoteSidebar.tsx        # Panel latÃ©ral "Devis en cours"
â”‚   â”‚   â”œâ”€â”€ QuoteItem.tsx           # Ligne de devis
â”‚   â”‚   â”œâ”€â”€ QuoteItemEditor.tsx     # Ligne Ã©ditable (prix, marge)
â”‚   â”‚   â”œâ”€â”€ QuoteFeeRow.tsx         # Ligne de frais
â”‚   â”‚   â”œâ”€â”€ QuoteSummary.tsx        # Totaux et actions
â”‚   â”‚   â”œâ”€â”€ AddToQuoteButton.tsx    # Bouton "Ajouter au devis"
â”‚   â”‚   â””â”€â”€ AddFeeModal.tsx         # Modal ajout de frais
â”‚   â”‚
â”‚   â””â”€â”€ search/
â”‚       â””â”€â”€ ResultCard.tsx          # Carte rÃ©sultat (modifiÃ©)
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCustomerQuote.ts         # Hook pour gÃ©rer le devis courant
â”‚
â””â”€â”€ context/
    â””â”€â”€ CustomerQuoteContext.tsx    # Context pour le devis en cours
```

### 7.2 Context du devis

```typescript
// context/CustomerQuoteContext.tsx

interface CustomerQuoteContextType {
  currentQuote: CustomerQuote | null;
  items: CustomerQuoteItem[];

  // Actions - Lignes transport
  createQuote: () => Promise<CustomerQuote>;
  addItem: (partnerQuoteId: string) => Promise<void>;
  removeItem: (itemId: string) => Promise<void>;
  updateItemMargin: (itemId: string, marginPercent: number) => Promise<void>;
  updateItemPrice: (itemId: string, sellPrice: number) => Promise<void>;

  // Actions - Lignes frais
  addFee: (description: string, price: number) => Promise<void>;
  updateFee: (itemId: string, description: string, price: number) => Promise<void>;
  removeFee: (itemId: string) => Promise<void>;

  clearQuote: () => void;

  // Computed
  transportSubtotal: number;  // Sous-total transports
  feesTotal: number;          // Total frais
  total: number;              // Grand total
  itemCount: number;
  totalMargin: number;        // Marge totale en EUR

  // UI State
  isSidebarOpen: boolean;
  toggleSidebar: () => void;
}

export const CustomerQuoteProvider: React.FC = ({ children }) => {
  const [currentQuote, setCurrentQuote] = useState<CustomerQuote | null>(null);

  // Persist quote ID in localStorage
  useEffect(() => {
    const savedQuoteId = localStorage.getItem('currentCustomerQuoteId');
    if (savedQuoteId) {
      loadQuote(savedQuoteId);
    }
  }, []);

  // ... implementation
};
```

---

## 8. Workflow utilisateur

### 8.1 ScÃ©nario : CrÃ©ation d'un devis multi-trajets

```
1. L'utilisateur clique sur "Nouveau Devis"
   â†’ Un brouillon est crÃ©Ã© (DEV-2026-0042)
   â†’ Le panel latÃ©ral s'ouvre (vide)

2. L'utilisateur fait une recherche : Paris â†’ Lyon
   â†’ RÃ©sultats affichÃ©s avec bouton "Ajouter au devis"

3. L'utilisateur clique sur "Ajouter" pour DHL (150 EUR achat)
   â†’ La ligne apparaÃ®t dans le panel
   â†’ Marge par dÃ©faut DHL (15%) appliquÃ©e automatiquement
   â†’ Prix vente affichÃ© : 172.50 EUR

4. L'utilisateur fait une nouvelle recherche : Lyon â†’ Marseille
   â†’ Nouveaux rÃ©sultats affichÃ©s

5. L'utilisateur ajoute Besson (120 EUR achat, marge 10%)
   â†’ Prix vente : 132.00 EUR
   â†’ Total mis Ã  jour : 304.50 EUR

6. L'utilisateur clique sur "Finaliser le devis"
   â†’ Ã‰cran d'Ã©dition des prix
   â†’ Peut ajuster les marges ligne par ligne
   â†’ Peut ajouter des frais (dossier, assurance...)

7. L'utilisateur ajoute "Frais de dossier" (25 EUR)
   â†’ Total mis Ã  jour : 329.50 EUR

8. L'utilisateur valide et clique sur "GÃ©nÃ©rer le devis"
   â†’ Formulaire client (nom, email)
   â†’ PDF gÃ©nÃ©rÃ© (uniquement prix de vente)
   â†’ Option d'envoi par email
```

### 8.2 Diagramme de flux

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page d'accueilâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nouveau Devis â”‚â”€â”€â”€â”€>â”‚ Devis crÃ©Ã©   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (brouillon)  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚                    â”‚
       v                    v                    v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recherche   â”‚     â”‚  Recherche   â”‚     â”‚  Recherche   â”‚
â”‚  Trajet 1    â”‚     â”‚  Trajet 2    â”‚     â”‚  Trajet N    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       v                    v                    v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  + Ajouter   â”‚     â”‚  + Ajouter   â”‚     â”‚  + Ajouter   â”‚
â”‚ (marge auto) â”‚     â”‚ (marge auto) â”‚     â”‚ (marge auto) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            v
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Panel Devis  â”‚
                     â”‚ (3 trajets)  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            v
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  Ã‰diteur de  â”‚
                     â”‚    prix      â”‚â—„â”€â”€â”€ Ajuster marges
                     â”‚              â”‚â—„â”€â”€â”€ Ajouter frais
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            v
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ GÃ©nÃ©rer PDF  â”‚
                     â”‚ (prix vente) â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            v
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Envoyer    â”‚
                     â”‚   au client  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Estimation

| TÃ¢che | Effort |
|-------|--------|
| **Backend** | |
| ModÃ¨les CustomerQuote + CustomerQuoteItem | ~1h |
| Ajout champ `default_margin` sur Partner | ~15min |
| Migration Alembic | ~15min |
| API CRUD CustomerQuotes | ~2h |
| API Items transport (add/remove/update margin) | ~2h |
| API Fees (add/remove/update) | ~1h |
| Logique calcul automatique des marges | ~1h |
| Service gÃ©nÃ©ration PDF | ~2h |
| **Frontend** | |
| CustomerQuoteContext + Provider | ~1h30 |
| QuoteSidebar component | ~2h |
| IntÃ©gration dans Search/Results | ~1h |
| Page CustomerQuotes (liste) | ~1h |
| Page CustomerQuoteDetail | ~2h |
| Page CustomerQuoteEditor (Ã©diteur prix) | ~2h30 |
| Composants QuoteItemEditor + QuoteFeeRow | ~1h30 |
| Modal AddFeeModal | ~1h |
| **Total** | **~22h** |

---

## 10. DÃ©cision

Approuvez-vous cette approche ?

- [ ] Oui, implÃ©menter cette solution
- [ ] Non, garder l'approche actuelle
- [ ] Modifier (prÃ©ciser les changements)
